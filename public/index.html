<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SupertailsAI - Transcript Analysis</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&family=Noto+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="/assets/favicon.svg">
</head>
<body id="app">
  <div class="app-container">
    <header>
      <div class="brand">
        <i class="fas fa-robot fa-lg" style="color: var(--primary);"></i>
        <h1>SupertailsAI</h1>
      </div>
      <div class="view-toggle-container">
        <button class="view-toggle-btn active" data-view="chat">Chat View</button>
        <button class="view-toggle-btn" data-view="analytics">Analytics</button>
      </div>
    </header>

    <main>
      <div id="main-chat-view" class="container">
        <div class="card" data-aos="fade-up">
          <div id="upload-section">
            <div class="upload-container" id="dropArea">
              <div class="upload-icon">
                <i class="fas fa-file-alt"></i>
              </div>
              <div class="upload-text">
                <h3>Upload Transcript or Audio</h3>
                <p>Drop your transcript file or audio recording here or click the button below to browse</p>
              </div>
              <label for="fileInput" class="btn">
                <i class="fas fa-upload"></i> Choose File
              </label>
              <input type="file" id="fileInput" class="file-input" accept=".txt,.doc,.docx,.pdf,.mp3">
              
              <div class="language-select">
                <label for="languageSelect">Language Spoken:</label>
                <select id="languageSelect">
                  <option value="en">English</option>
                  <option value="hi">Hindi</option>
                  <option value="auto">Don't know (Auto Detect)</option>
                </select>
              </div>
              <div id="fileName" class="file-name"></div>
              <div id="fileFeedback" class="file-feedback"></div>
              
              <div id="transcriptOptions" class="transcript-options">
                <div id="audioContainer" class="audio-container">
                  <audio id="audioPlayer" controls></audio>
                </div>
                <textarea id="transcriptInput" class="transcript-input" placeholder="Paste transcript here if available..."></textarea>
                <div class="button-row">
                  <button id="processWithTranscriptBtn" class="btn">
                    <i class="fas fa-check"></i> Process with Transcript
                  </button>
                  <button id="processWithoutTranscriptBtn" class="btn btn-outline">
                    <i class="fas fa-microphone"></i> No Transcript Available
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div id="loading-section" class="loading-container">
            <div class="loader"></div>
            <div class="loader-text">Processing your transcript...</div>
            <p>This might take a moment. We're analyzing your transcript to provide the best experience.</p>
          </div>

          <div id="chat-section" class="chat-container">
            <div class="chat-header">
              <div class="chat-title">
                <i class="fas fa-comments"></i>
                <h3>Transcript Assistant</h3>
              </div>
              <button id="newTranscript" class="btn btn-outline">
                <i class="fas fa-plus"></i> New Transcript
              </button>
            </div>
            
            <div id="chatMessages" class="chat-body">
              <div class="message">
                <div class="avatar bot-avatar">
                  <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                  <div class="message-text">Hi there! I've processed your transcript. Ask me any questions about it and I'll do my best to provide insights and answers.</div>
                </div>
              </div>
            </div>
            
            <div class="chat-footer">
              <div id="specialPromptButtons" class="special-prompt-buttons"></div>
              <i class="fas fa-question-circle chat-input-icon"></i>
              <input type="text" class="chat-input" id="userInput" placeholder="Ask about your transcript...">
              <button class="chat-submit" id="sendMessage">
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div id="analytics-view" class="container">
        <div class="card" data-aos="fade-up">
          <h2>Pet Parent Analytics</h2>
          
          <div class="analytics-controls">
            <div class="analytics-filters">
              <div class="filter-group">
                <label for="filterSpecies">Filter by Species:</label>
                <select id="filterSpecies" class="filter-select">
                  <option value="all">All Pets</option>
                  <option value="dog">Dogs</option>
                  <option value="cat">Cats</option>
                  <option value="other">Other Pets</option>
                </select>
              </div>
              <div class="filter-group">
                <label for="filterLifeStage">Filter by Life Stage:</label>
                <select id="filterLifeStage" class="filter-select">
                  <option value="all">All Stages</option>
                  <option value="puppy">Puppy/Kitten</option>
                  <option value="adult">Adult</option>
                  <option value="senior">Senior</option>
                </select>
              </div>
              <div class="filter-group">
                <label for="filterCategory">Filter by Category:</label>
                <select id="filterCategory" class="filter-select">
                  <option value="all">All Categories</option>
                  <option value="food">Food Customers</option>
                  <option value="pharmacy">Pharmacy Customers</option>
                </select>
              </div>
            </div>
            
            <div class="analytics-upload">
              <h3>Upload Additional Transcripts</h3>
              <div class="upload-container mini-upload" id="analyticsDropArea">
                <div class="upload-icon">
                  <i class="fas fa-file-alt"></i>
                </div>
                <label for="analyticsFileInput" class="btn">
                  <i class="fas fa-upload"></i> Choose Files
                </label>
                <input type="file" id="analyticsFileInput" class="file-input" accept=".txt,.doc,.docx,.pdf,.mp3,.wav" multiple>
              </div>
              <div id="analyticsFileList" class="file-list"></div>
              <div id="analyticsFeedback" class="file-feedback"></div>
            </div>
          </div>
          
          <div class="analytics-dashboard">
            <div class="pet-parent-summary">
              <div class="stats-container">
                <div class="stat-card">
                  <div class="stat-icon"><i class="fas fa-paw"></i></div>
                  <div id="totalTranscripts" class="stat-value">0</div>
                  <div class="stat-label">Total Transcripts</div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon"><i class="fas fa-dog"></i></div>
                  <div id="dogOwners" class="stat-value">0</div>
                  <div class="stat-label">Dog Owners</div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon"><i class="fas fa-cat"></i></div>
                  <div id="catOwners" class="stat-value">0</div>
                  <div class="stat-label">Cat Owners</div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon"><i class="fas fa-clinic-medical"></i></div>
                  <div id="clinicPitches" class="stat-value">0</div>
                  <div class="stat-label">Clinic Pitches</div>
                </div>
              </div>
              
              <div class="pet-distribution-chart">
                <h3>Pet Distribution</h3>
                <div id="petDistributionChart" class="chart-canvas-container"></div>
              </div>
            </div>
            
            <div class="analytics-sections">
              <div class="analytics-section">
                <h3>Pet Parent Knowledge Levels</h3>
                <div class="chart-container">
                  <div class="chart-bar high">
                    <div id="highKnowledgeBar" class="chart-fill"></div>
                    <div class="chart-label">High Knowledge</div>
                    <div id="highKnowledgeValue" class="chart-value">0</div>
                  </div>
                  <div class="chart-bar medium">
                    <div id="mediumKnowledgeBar" class="chart-fill"></div>
                    <div class="chart-label">Medium Knowledge</div>
                    <div id="mediumKnowledgeValue" class="chart-value">0</div>
                  </div>
                  <div class="chart-bar low">
                    <div id="lowKnowledgeBar" class="chart-fill"></div>
                    <div class="chart-label">Low Knowledge</div>
                    <div id="lowKnowledgeValue" class="chart-value">0</div>
                  </div>
                </div>
              </div>
              
              <div class="analytics-section">
                <h3>Key Questions Analysis</h3>
                <div id="keyQuestionsChart" class="key-questions-chart"></div>
              </div>
            </div>
            
            <div class="analytics-section full-width">
              <div class="section-header">
                <h3>Transcript Analysis</h3>
                <div class="view-actions">
                  <button id="showAllTranscripts" class="action-btn active"><i class="fas fa-list"></i> All</button>
                  <button id="viewDetailedTranscript" class="action-btn"><i class="fas fa-search"></i> View Details</button>
                </div>
              </div>
              <div id="transcriptTable" class="transcript-table">
                <table>
                  <thead>
                    <tr>
                      <th>Pet Parent</th>
                      <th>Pet Type</th>
                      <th>Pet Name</th>
                      <th>Life Stage</th>
                      <th>Knowledge Level</th>
                      <th>Key Issues</th>
                      <th>Category</th>
                      <th>Clinic Pitched</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="petsTableBody">
                    <tr>
                      <td colspan="9" class="empty-table">No transcripts analyzed yet</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div id="transcriptDetail" class="transcript-detail" style="display: none">
                <div class="detail-header">
                  <button id="backToList" class="btn btn-outline btn-sm"><i class="fas fa-arrow-left"></i> Back to List</button>
                  <h4 id="detailTitle">Transcript Details</h4>
                </div>
                <div id="detailContent" class="detail-content"></div>
              </div>
            </div>
            
            <div class="analytics-section full-width">
              <h3>Key Insights</h3>
              <div class="insights-container">
                <div class="insight-tabs">
                  <button class="insight-tab active" data-tab="commonQuestions">Common Questions</button>
                  <button class="insight-tab" data-tab="customerDifferences">Food vs Pharmacy</button>
                  <button class="insight-tab" data-tab="excitementFactors">Excitement Factors</button>
                  <button class="insight-tab" data-tab="effectivePitches">Effective Pitches</button>
                  <button class="insight-tab" data-tab="lifeStageInsights">Life Stage Insights</button>
                  <button class="insight-tab" data-tab="clinicOpportunities">Clinic Opportunities</button>
                </div>
                <div class="insight-content">
                  <div id="commonQuestions" class="insight-panel active">
                    <h4>Common Questions from Pet Parents</h4>
                    <div id="commonQuestionsContent" class="insight-data"></div>
                  </div>
                  <div id="customerDifferences" class="insight-panel">
                    <h4>Differences Between Food & Pharmacy Customers</h4>
                    <div id="customerDifferencesContent" class="insight-data"></div>
                  </div>
                  <div id="excitementFactors" class="insight-panel">
                    <h4>Pet Parent Excitement Factors</h4>
                    <div id="excitementFactorsContent" class="insight-data"></div>
                  </div>
                  <div id="effectivePitches" class="insight-panel">
                    <h4>Effective Vet Pitches by Life Stage/Species</h4>
                    <div id="effectivePitchesContent" class="insight-data"></div>
                  </div>
                  <div id="lifeStageInsights" class="insight-panel">
                    <h4>Key Insights by Life Stage</h4>
                    <div id="lifeStageInsightsContent" class="insight-data"></div>
                  </div>
                  <div id="clinicOpportunities" class="insight-panel">
                    <h4>Clinic Pitches & Missed Opportunities</h4>
                    <div id="clinicOpportunitiesContent" class="insight-data"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <p>AI responses might be incorrect. Verify important information.</p>
    </footer>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.prod.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="config.js"></script>
  <script src="script.js"></script>
  <script src="analytics.js"></script>
</body>
</html>