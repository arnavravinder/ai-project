<!DOCTYPE html> <html> <head> <meta charset="UTF-8"> <title>Firebase AI Consultant</title> <style> body {font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5;} .container {max-width: 800px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);} h1 {text-align: center;} .chat-window {height: 400px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; margin-bottom: 10px;} .chat-message {margin: 5px 0; padding: 8px; border-radius: 4px; max-width: 80%;} .user {background: #dcf8c6; margin-left: auto; text-align: right;} .bot {background: #f1f0f0; margin-right: auto; text-align: left;} input[type="text"] {width: calc(100% - 90px); padding: 10px; border: 1px solid #ccc; border-radius: 4px;} button {width: 70px; padding: 10px; border: none; background: #007bff; color: #fff; border-radius: 4px; cursor: pointer;} </style> <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script> <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script> </head> <body> <div class="container"> <h1>Firebase AI Consultant</h1> <div class="chat-window" id="chat-window"></div> <div style="display: flex;"> <input type="text" id="user-input" placeholder="Ask about Firebase data..." /> <button id="send-btn">Send</button> </div> </div> <script> var firebaseConfig = { apiKey: "AIzaSyCMF36GhBxsMpbl1c8BYdcAN_7PwLclVVs", authDomain: "super-tails.firebaseapp.com", databaseURL: "https://super-tails-default-rtdb.firebaseio.com", projectId: "super-tails", storageBucket: "super-tails.firebasestorage.app", messagingSenderId: "210460279486", appId: "1:210460279486:web:e98a0775f4e32268c894ef", measurementId: "G-HFM274BKGV" }; firebase.initializeApp(firebaseConfig); let cachedFirebaseData = null; async function fetchFirebaseData() { if (cachedFirebaseData) return cachedFirebaseData; try { const snapshot = await firebase.database().ref('transcripts').once('value'); cachedFirebaseData = snapshot.val(); return cachedFirebaseData; } catch (error) { console.error("Firebase fetch error:", error); return null; } } async function sendMessage() { const inputEl = document.getElementById("user-input"); const message = inputEl.value.trim(); if (!message) return; appendMessage("user", message); inputEl.value = ""; const data = await fetchFirebaseData(); let extractedText = ""; if (data) { for (let key in data) { if (data.hasOwnProperty(key) && data[key].text) { extractedText += data[key].text + "\n\n"; } } } const prompt = message + "\n\nFirebase Data:\n" + extractedText; try { const res = await fetch("https://supertails.vercel.app/api/gemini", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ prompt }) }); const json = await res.json(); const reply = json.reply || json.message || "No reply received."; appendMessage("bot", reply); } catch (error) { console.error("API fetch error:", error); appendMessage("bot", "Error: " + error.message); } } function appendMessage(sender, text) { const chatWindow = document.getElementById("chat-window"); const msgDiv = document.createElement("div"); msgDiv.className = "chat-message " + sender; msgDiv.innerText = text; chatWindow.appendChild(msgDiv); chatWindow.scrollTop = chatWindow.scrollHeight; } document.getElementById("send-btn").addEventListener("click", sendMessage); document.getElementById("user-input").addEventListener("keyup", function(e) { if (e.key === "Enter") sendMessage(); }); </script> </body> </html>





